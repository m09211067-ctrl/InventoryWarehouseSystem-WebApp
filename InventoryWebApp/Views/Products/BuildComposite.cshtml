@model InventoryWebApp.Models.Product

@{
    ViewData["Title"] = "ุฅูุดุงุก ููุชุฌ ูุฑูุจ";
}

<div class="container mt-4" dir="rtl">
    <h2 class="text-center mb-4">๐งฉ ุฅูุดุงุก ููุชุฌ ูุฑูุจ (BOM)</h2>

    <form asp-action="SaveComposite" method="post">

        <!-- ูุนูููุงุช ุงูููุชุฌ ุงูููุงุฆู -->
        <div class="card mb-3">
            <div class="card-header">๐ฆ ุงูููุชุฌ ุงูููุงุฆู</div>
            <div class="card-body">
                <div class="mb-2">
                    <label>ุงุณู ุงูููุชุฌ</label>
                    <input type="text" name="productName"
                           class="form-control"
                           value="@Model.ProductName" required />
                </div>

                <div class="mb-2">
                    <label>ุงููููุฉ ุงูููุชูุฌุฉ</label>
                    <input type="number" name="finalQuantity"
                           class="form-control" value="1" min="1" required />
                </div>
            </div>
        </div>

        <!-- ุงุฎุชูุงุฑ ุงููุฎุฒู -->
        <div class="card mb-3">
            <div class="card-header">๐ฌ ุงุฎุชูุงุฑ ุงููุฎุฒู</div>
            <div class="card-body">
                <select name="warehouseId" class="form-control" required>
                    <option value="">-- ุงุฎุชุฑ ูุฎุฒู --</option>
                    @foreach (var w in ViewBag.Warehouses)
                    {
                        <option value="@w.WarehouseID">
                            @w.WarehouseName (@w.BranchName)
                        </option>
                    }
                </select>
            </div>
        </div>

        <!-- ุงุฎุชูุงุฑ ุงูููููุงุช -->
        <div class="card mb-3">
            <div class="card-header">๐งฑ ููููุงุช ุงูููุชุฌ</div>
            <div class="card-body">

                @foreach (var c in ViewBag.Components)
                {
                    <div class="row mb-2 align-items-center">
                        <div class="col-6">
                            <input type="checkbox"
                                   name="componentIds"
                                   value="@c.ProductID" />
                            @c.ProductName (ูุชููุฑ: @c.Quantity)
                        </div>
                        <div class="col-6">
                            <input type="number"
                                   name="componentQuantities[@c.ProductID]"
                                   class="form-control"
                                   placeholder="ุงููููุฉ"
                                   min="1" />
                        </div>
                    </div>
                }

            </div>
        </div>

        <button type="submit" class="btn btn-success">
            ๐พ ุญูุธ ุงูููุชุฌ ุงููุฑูุจ
        </button>

        <a asp-action="Index" class="btn btn-secondary ms-2">ุฅูุบุงุก</a>
    </form>
</div>
